// Decompiled by Jad v1.5.8e. Copyright 2001 Pavel Kouznetsov.
// Jad home page: http://www.geocities.com/kpdus/jad.html
// Decompiler options: braces fieldsfirst space lnc 

package com.qihoo.security.ui.antivirus;

import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.support.v4.content.g;
import android.text.TextUtils;
import android.util.DisplayMetrics;
import android.view.View;
import android.widget.LinearLayout;
import com.qihoo.security.app.BaseActivity;
import com.qihoo.security.locale.d;
import com.qihoo.security.locale.widget.LocaleButton;
import com.qihoo.security.locale.widget.LocaleTextView;
import com.qihoo.security.malware.a.b;
import com.qihoo.security.malware.db.c;
import com.qihoo.security.malware.vo.MaliciousInfo;
import com.qihoo.security.widget.ImageView.RemoteImageView;
import com.qihoo360.common.utils.PortPackageParser;
import com.qihoo360.common.utils.Utils;
import com.qihoo360.mobilesafe.b.f;
import com.qihoo360.mobilesafe.b.i;
import com.qihoo360.mobilesafe.b.q;
import com.qihoo360.mobilesafe.support.a;
import java.io.File;
import java.util.ArrayList;
import java.util.List;

public class MalwareDetailActivity extends BaseActivity
    implements android.view.View.OnClickListener
{

    private static final String y = com/qihoo/security/ui/antivirus/MalwareDetailActivity.getSimpleName();
    private LocaleTextView A;
    private LocaleTextView B;
    private View C;
    private LocaleTextView D;
    private View E;
    private LocaleButton F;
    private LocaleButton G;
    private LocaleButton H;
    private LocaleButton I;
    private MaliciousInfo J;
    private boolean K;
    private b L;
    private com.qihoo.security.dialog.g M;
    private boolean N;
    private boolean O;
    private final com.qihoo.security.malware.a.a.a P = new com.qihoo.security.malware.a.a.a() {

        final MalwareDetailActivity a;

        public void a()
        {
            com.qihoo360.mobilesafe.b.d.b(com.qihoo.security.ui.antivirus.MalwareDetailActivity.b(a));
            if (com.qihoo.security.ui.antivirus.MalwareDetailActivity.c(a).isUninstall(a.p))
            {
                if (!com.qihoo.security.ui.antivirus.MalwareDetailActivity.d(a))
                {
                    MalwareDetailActivity.e(a).a(new Intent("com.qihoo.action.MONITOR_UPDATE"));
                }
                com.qihoo.security.ui.antivirus.MalwareDetailActivity.a(a, com.qihoo.security.ui.antivirus.MalwareDetailActivity.d(a));
                a.onBackPressed();
            }
        }

        public void a(MaliciousInfo maliciousinfo, int k, int l)
        {
        }

        public void b()
        {
        }

            
            {
                a = MalwareDetailActivity.this;
                super();
            }
    };
    private RemoteImageView z;

    public MalwareDetailActivity()
    {
    }

    static LocaleTextView a(MalwareDetailActivity malwaredetailactivity)
    {
        return malwaredetailactivity.A;
    }

    static boolean a(MalwareDetailActivity malwaredetailactivity, boolean flag)
    {
        malwaredetailactivity.N = flag;
        return flag;
    }

    static com.qihoo.security.dialog.g b(MalwareDetailActivity malwaredetailactivity)
    {
        return malwaredetailactivity.M;
    }

    static MaliciousInfo c(MalwareDetailActivity malwaredetailactivity)
    {
        return malwaredetailactivity.J;
    }

    static boolean d(MalwareDetailActivity malwaredetailactivity)
    {
        return malwaredetailactivity.O;
    }

    static g e(MalwareDetailActivity malwaredetailactivity)
    {
        return malwaredetailactivity.x;
    }

    private void p()
    {
        z = (RemoteImageView)findViewById(0x7f0b0086);
        A = (LocaleTextView)findViewById(0x7f0b0088);
        B = (LocaleTextView)findViewById(0x7f0b0089);
        C = findViewById(0x7f0b0183);
        D = (LocaleTextView)findViewById(0x7f0b0186);
        E = findViewById(0x7f0b008b);
        F = (LocaleButton)findViewById(0x7f0b0189);
        G = (LocaleButton)findViewById(0x7f0b018a);
        H = (LocaleButton)findViewById(0x7f0b0187);
        I = (LocaleButton)findViewById(0x7f0b0188);
        H.setOnClickListener(this);
        I.setOnClickListener(this);
        G.setOnClickListener(this);
        F.setOnClickListener(this);
    }

    private void q()
    {
        K = com.qihoo360.mobilesafe.support.a.c(p);
        L = new b(this, K, P);
        Object obj;
        Object obj1;
        int k;
        int l;
        if (J.isSystem)
        {
            if (K)
            {
                G.setVisibility(8);
                F.setVisibility(0);
            } else
            {
                G.setVisibility(0);
                F.setVisibility(8);
            }
        } else
        {
            G.setVisibility(8);
            F.setVisibility(0);
        }
        if (!J.isInstalled)
        {
            F.setLocalText(0x7f0c00e8);
        }
        r();
        s();
        if (i.a(p, J.packageName))
        {
            z.b(J.packageName, 0x7f020044);
        } else
        {
            z.c(J.filePath, 0x7f020044);
        }
        A.setTag(J.packageName);
        com.qihoo.security.opti.trashclear.ui.mainpage.opti.a.a().a(new com.qihoo.security.opti.trashclear.ui.mainpage.opti.a.a() {

            final MalwareDetailActivity a;

            public void a(String s1, String s2)
            {
                String s3 = (String)com.qihoo.security.ui.antivirus.MalwareDetailActivity.a(a).getTag();
                if (!TextUtils.isEmpty(s3) && s3.equals(s2) && s1 != null)
                {
                    com.qihoo.security.ui.antivirus.MalwareDetailActivity.a(a).setLocalText(s1);
                }
            }

            
            {
                a = MalwareDetailActivity.this;
                super();
            }
        }, "appLabel", J.packageName, J.filePath);
        k = J.maliceRank;
        l = 0x7f08002c;
        if (J.isTrojan())
        {
            k = 3;
        } else
        if (J.isDanger())
        {
            k = 1;
        } else
        if (J.isWarning())
        {
            if (J.isAdvert())
            {
                k = 4;
            } else
            {
                k = 2;
            }
            l = 0x7f08002d;
        }
        obj1 = com.qihoo.security.malware.b.a(this, k);
        obj = obj1;
        if (J.isSystem)
        {
            obj = o.a(0x7f0c00e6, new Object[] {
                obj1
            });
        }
        B.setLocalText(((CharSequence) (obj)));
        B.setTextColor(getResources().getColor(l));
        obj = com.qihoo.security.malware.b.c(this, J.behavior);
        if (TextUtils.isEmpty(((CharSequence) (obj))))
        {
            C.setVisibility(8);
        } else
        {
            C.setVisibility(0);
            D.setLocalText(((CharSequence) (obj)));
        }
        obj = (LinearLayout)findViewById(0x7f0b008e);
        if (J.isInstalled)
        {
            obj1 = new com.qihoo.security.ui.a.a(this, J.packageName);
            if (((com.qihoo.security.ui.a.a) (obj1)).a() > 0)
            {
                E.setVisibility(0);
                ((LinearLayout) (obj)).addView(((com.qihoo.security.ui.a.a) (obj1)).b());
                return;
            } else
            {
                E.setVisibility(8);
                return;
            }
        }
        obj1 = new DisplayMetrics();
        ((DisplayMetrics) (obj1)).setToDefaults();
        obj1 = PortPackageParser.parsePackage(new File(J.filePath), null, ((DisplayMetrics) (obj1)), 0);
        if (obj1 == null)
        {
            E.setVisibility(8);
            return;
        }
        obj1 = new com.qihoo.security.ui.a.a(this, ((android.content.pm.PackageParser.Package) (obj1)));
        if (((com.qihoo.security.ui.a.a) (obj1)).a() > 0)
        {
            E.setVisibility(0);
            ((LinearLayout) (obj)).addView(((com.qihoo.security.ui.a.a) (obj1)).b());
            return;
        } else
        {
            E.setVisibility(8);
            return;
        }
    }

    private void r()
    {
        if (!J.isInstalled || com.qihoo.security.malware.db.c.a(p, J) || !J.isWarning())
        {
            H.setVisibility(8);
            return;
        } else
        {
            H.setVisibility(0);
            return;
        }
    }

    private void s()
    {
        if (J.isTrojan() || J.isDanger())
        {
            I.setVisibility(0);
            return;
        } else
        {
            I.setVisibility(8);
            return;
        }
    }

    private void t()
    {
        com.qihoo.security.support.b.a(14310, J.getMfsha1HexString(), (new StringBuilder()).append(J.packageName).append("|").append(J.getVersionCode(p)).append("|").append(J.getSignHash(p)).toString());
        com.qihoo360.mobilesafe.b.q.a().a(0x7f0c012d);
    }

    private void u()
    {
        N = true;
        ArrayList arraylist = new ArrayList();
        arraylist.add(J);
        com.qihoo.security.malware.db.c.a(p, arraylist);
        r();
        if (!O)
        {
            x.a(new Intent("com.qihoo.action.MONITOR_UPDATE"));
        }
    }

    private void v()
    {
        if (J.isUninstall(p))
        {
            o();
        } else
        {
            ArrayList arraylist = new ArrayList(1);
            arraylist.add(J);
            L.a(arraylist);
            if (!J.isInstalled)
            {
                o();
                return;
            }
            if (K && M != null)
            {
                com.qihoo360.mobilesafe.b.d.a(M);
                return;
            }
        }
    }

    protected void j()
    {
        super.j();
        if (r != null)
        {
            com.qihoo.security.support.b.c(14012);
            if (J.isMalware())
            {
                b(0x7f0c0105);
                if (J.isTrojan() && J.isSystem)
                {
                    com.qihoo.security.support.b.c(14022);
                }
            } else
            if (J.isWarning())
            {
                if (J.isAdvert())
                {
                    b(o.a(0x7f0c0107));
                    com.qihoo.security.support.b.c(14030);
                    return;
                } else
                {
                    b(o.a(0x7f0c0106));
                    com.qihoo.security.support.b.c(14008);
                    return;
                }
            }
        }
    }

    public void o()
    {
        if (!O)
        {
            x.a(new Intent("com.qihoo.action.MONITOR_UPDATE"));
        }
        N = true;
        onBackPressed();
    }

    public void onBackPressed()
    {
        if (N)
        {
            setResult(-1);
        }
        super.onBackPressed();
    }

    public void onClick(View view)
    {
        if (f.a())
        {
            return;
        }
        switch (view.getId())
        {
        default:
            return;

        case 2131427719: 
            u();
            return;

        case 2131427721: 
            v();
            return;

        case 2131427722: 
            com.qihoo360.mobilesafe.b.a.a(p, J.packageName);
            return;

        case 2131427720: 
            t();
            return;
        }
    }

    protected void onCreate(Bundle bundle)
    {
        Intent intent = getIntent();
        if (intent != null)
        {
            J = (MaliciousInfo)intent.getParcelableExtra("extra_detail_info");
            O = intent.getBooleanExtra("extra_from_virus_list", false);
        }
        if (J == null)
        {
            o();
            return;
        } else
        {
            super.onCreate(bundle);
            setContentView(0x7f030074);
            p();
            q();
            return;
        }
    }

    protected void onDestroy()
    {
        Utils.dismissDialog(M);
        super.onDestroy();
    }

    protected void onResume()
    {
        super.onResume();
        if (J.isUninstall(p))
        {
            com.qihoo360.mobilesafe.b.q.a().a(0x7f0c013a);
            o();
        } else
        {
            if (J.isSystem && com.qihoo360.mobilesafe.b.a.b(p, J.packageName) && !K)
            {
                o();
                return;
            }
            K = com.qihoo360.mobilesafe.support.a.c(p);
            if (K && M == null)
            {
                M = new com.qihoo.security.dialog.g(this);
                M.a(0x7f0c00eb);
                M.setCancelable(false);
                M.setCanceledOnTouchOutside(false);
            }
            if (K)
            {
                if (J.isSystem)
                {
                    if (K)
                    {
                        G.setVisibility(8);
                        F.setVisibility(0);
                    } else
                    {
                        G.setVisibility(0);
                        F.setVisibility(8);
                    }
                } else
                {
                    G.setVisibility(8);
                    F.setVisibility(0);
                }
            }
            if (L != null)
            {
                L.c();
                return;
            }
        }
    }

    protected void onStart()
    {
        super.onStart();
        if (L != null)
        {
            L.a();
        }
        if (J != null && J.isUninstall(p))
        {
            o();
        }
    }

    protected void onStop()
    {
        super.onStop();
        if (L != null)
        {
            L.b();
        }
    }

}
